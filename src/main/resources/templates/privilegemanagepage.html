<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>设计文件</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.css">
    <script src="/lib/jquery-3.3.1.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/theme.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/premium.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/sumoselect.css">
    <script src="/lib/WdatePicker.js" type="text/javascript"></script>
    <script src="/lib/jquery.sumoselect.js" type="text/javascript"></script>
</head>
<div class=" theme-blue">

    <!-- Demo page code -->

    <script type="text/javascript">
        var extensionarrays;
        var extensionarray;
        $(function () {
            extensionarrays = $("#extension").val();
            extensionarray = eval("(" + extensionarrays + ")");
            window.parent.document.getElementById('content').style.display = "block";
            window.parent.document.getElementById('contentnew').style.display = "none";
            var flag = $("#flag").val();
            $('.SlectBox').SumoSelect({
                csvSepChar: ",",
                csvDispCount: 3,
                captionFormat: '已选择：{0}(个)',
                selectAll: true,
                captionFormatAllSelected: "全选",
                okCancelInMulti: true,
                locale: ['确定', '取消', '全选']
            });
            // var flag = $("#type").val();
            //
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！")
            // }
            if (flag == "-1") {
                alert("您没有权限！")
            }
            var match = document.cookie.match(new RegExp('color=([^;]+)'));
            if (match) var color = match[1];
            if (color) {
                $('body').removeClass(function (index, css) {
                    return (css.match(/\btheme-\S+/g) || []).join(' ')
                })
                $('body').addClass('theme-' + color);
            }

        });
    </script>
    <style type="text/css">
        #urlthead th {
            text-align: center;
        }

        #div1css {
            border: 1px solid #9AC0CD;
            width: 100%;
            height: 65px;
            Margin: 2px;
            padding: 3px;
        }

        .clear {
            zoom: 1;
        }

        .clear:after {
            content: "";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        .page_btn {
            padding-top: 20px;
        }

        .page_btn a {
            cursor: pointer;
            padding: 1px;
            border: solid 1px #ccc;
            font-size: 12px;
        }

        .page_box {
            float: right;
        }

        .num {
            padding: 0 10px;
        }

        #folderdiv {
            border: 1px solid #9AC0CD;
            width: 99%;
            height: 500px;
            Margin: 2px;
            padding: 3px;
        }

        #titlename {
            border: 1px solid #9AC0CD;
            width: 100%;
            height: 20px;
            margin-left: 10px;
            margin-right: 10px;
            top: 0;
            bottom: 0;
        }

        #showMessageDiv {
            border: 1px solid #9AC0CD;
            width: 800px;
            height: 500px;
            Margin: 2px;
            padding: 3px;
            z-index: 1007;
            background-color: #E0EEEE;
            position: absolute;
            top: 19%;
            left: 28%;;
        }

        #innershowMessageDiv {
            border: 1px solid #9AC0CD;
            width: 787px;
            height: 487px;
            Margin: 3px;
            padding: 3px;
            z-index: 1008;
            background-color: #E0EEEE;
            position: absolute;
        }

        #innershowMessageDiv1 {
            border: 1px solid #9AC0CD;
            width: 750px;
            height: 390px;
            margin-left: 15px;
            margin-right: 15px;
            margin-top: 15px;
            padding: 3px;
            background-color: #E0EEEE;
        }

        #innershowMessageDiv11 {
            width: 745px;
            height: 30px;
            background-color: #E0EEEE;
        }

        #innershowMessageDiv12 {
            width: 745px;
            height: 360px;
            background-color: #E0EEEE;
            position: absolute;
        }


        #innershowMessageDiv2 {
            border: 1px solid #9AC0CD;
            width: 750px;
            height: 50px;
            margin-left: 15px;
            margin-right: 15px;
            margin-bottom: 15px;
            padding-left: 3px;
            padding-right: 3px;
            padding-bottom: 3px;
            background-color: #E0EEEE;
            position: absolute;

        }

        #coverbehidepage {
            display: none;
            position: absolute;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 1006;
            -moz-opacity: 0.3;
            opacity: .30;
            filter: alpha(opacity=30);

        }

        #titlename1 {
            border: 1px solid #9AC0CD;
            width: 1095px;
            height: 20px;
            margin-left: 10px;
            margin-right: 10px;
            top: 0;
            bottom: 0;
        }

        #innerfolderdiv {
            border: 1px solid #9AC0CD;
            width: 100%;
            height: 438px;
            margin-left: 10px;
            margin-right: 10px;
            top: 0;
            margin-bottom: 10px;
        }

        #div2css {
            border: 1px solid #9AC0CD;
            width: 100%;
            height: 40px;
            Margin: 2px;
            padding: 3px;
        }

        table.grid {
            font-family: verdana, arial, sans-serif;
            font-size: 12px;
            border-width: 1px;
            border-collapse: collapse;
        }

        table.grid th {
            text-align: center;
            white-space: nowrap;
            border-style: solid;
            border-width: 1px;
            border-color: #2aabd2;
        }

        table.grid td {
            white-space: nowrap;
            border-style: solid;
            border-width: 1px;
            border-color: #2aabd2;
        }

        .navbar-default .navbar-brand, .navbar-default .navbar-brand:hover {
            color: #fff;
        }
    </style>

    <script type="text/javascript">
        var currentPage;
        var totalPage;
        var totaldata;
        var pageSize;

        var current_page = 12;
        var current_num = 1;
        var total_page;
        $(function () {
            var uls = $('.sidebar-nav > ul > *').clone();
            uls.addClass('visible-xs');
            $('#main-menu').append(uls.clone());


            $(".next").click(function () {
                if (current_num >= total_page) {
                    return false;
                } else {
                    $(".current_page").text(++current_num);
                    $.each($('#showdatatable tr'), function (index, item) {
                        var start = current_page * (current_num - 1);
                        var end = current_page * current_num;
                        if (index >= start && index < end) {
                            $(this).show();
                        } else {
                            $(this).hide();
                        }
                    });
                }
            });

            $(".prev").click(function () {
                if (current_num == 1) {
                    return false;
                } else {
                    $(".current_page").text(--current_num);
                    $.each($('#showdatatable tr'), function (index, item) {
                        var start = current_page * (current_num - 1);
                        var end = current_page * current_num;
                        if (index >= start && index < end) {
                            $(this).show();
                        } else {
                            $(this).hide();
                        }
                    });
                }
            })

        });


        function goPageone() {
            $("#n_currentPage").val(1);
            findFoldersByQueryParam();
        }

        function goPrePage() {
            var currentpage = $("#_tp").val();
            $("#currentpagespan").html(currentpage * 1 + -1 * 1)
            $("#n_currentPage").val(currentpage * 1 - 1 * 1);
            findFoldersByQueryParam();
        }

        function goAftPage() {
            var currentpage = $("#_tp").val();
            $("#currentpagespan").html(currentpage * 1 + 1 * 1)
            $("#n_currentPage").val(currentpage * 1 + 1 * 1);
            findFoldersByQueryParam();

        }

        function showcookie() {
            window.location.href = "/fileupdown/showcookies";
        }

        function goMaxPage() {
            $("#n_currentPage").val($("#maxPage").val());
            findFoldersByQueryParam();
        }

        function goPage2() {
            var tp = document.getElementById("_tp").value;
            var max = $("#maxPage").val();
            tp = tp.trim();
            var r = /^\+?[0-9][0-9]*$/;
            if (!(r.test(tp))) {
                alert("页数输入有误，请重新输入!");
                $("#_tp").val(max);
                return false;
            } else if (parseInt(tp) == 0) {
                alert("页数必须大于0!");
                $("#_tp").val(max);
                return false;
            } else if (parseInt(tp) > parseInt(max)) {
                alert("不能大于总页数!");
                $("#_tp").val(max);
                return false;
            } else {
                $("#n_currentPage").val(tp);
                // document.forms["form0"].submit();
                findFoldersByQueryParam();
            }
        }

        function goAjaxPage(strCount) {
            switch (strCount) {
                case "0":
                    if (currentPage == 1)
                        return;
                    else
                        currentPage = 1;
                    break;
                case "-1":
                    if (currentPage == 1)
                        return;
                    if (currentPage != 1)
                        currentPage = parseInt(currentPage) - 1;
                    break;
                case "1":
                    if (currentPage == totalPage)
                        return;
                    if (currentPage != totalPage)
                        currentPage = parseInt(currentPage) + 1;
                    break;
                case "end":
                    if (currentPage == totalPage)
                        return;
                    if (currentPage != totalPage)
                        currentPage = totalPage;
                    break;
                case "_go":
                    var _page = $("#_tp2").val();
                    if (!isInt(_page)) {
                        alert("请输入正整数!");
                        return;
                    }
                    if (_page <= 0) {
                        alert("页数必须大于0!");
                        return;
                    }
                    if (parseInt(_page) > parseInt(totalPage)) {
                        alert("不能大于总页数!");
                        return;
                    }
                    currentPage = $("#_tp2").val();
                    break;
                default:
                    break;
            }
            if (totalPage) {
                $("#n_currentPage").val(currentPage);
                querySupplierPage();
            }
        }

        function clickButton(event) {
            if (event.keyCode == 13) {
                goAjaxPage("_go");
                return false;
            }
        }

        function alertMessageDiv() {
            var ojb = window.parent.document.getElementById('innershowMessageDiv12');
            ojb.innerHTML = "\n" +
                "                    <p><br>\n" +
                "\n" +
                "                        <font color=\"#000000\" size=\"2\" th:align=\"center\">一,权限:公司的管理层才有对文件(夹)的权限更改权力.其它只有查阅,无更改权限.</font>\n" +
                "                    <p>\n" +
                "                        <br>\n" +
                "                        <font color=\"#000000\" size=\"2\" th:align=\"center\">二,初次进入管理层页面,展示的是服务器中所有文件资源(与权限无关).</font>\n" +
                "                    <p><br>\n" +
                "\n" +
                "                        <font color=\"#000000\" size=\"2\" th:align=\"center\">三,点击查询,展示的将是服务器中所有的文件资源和有关的权限联系.</font>\n" +
                "                    <p><br>\n" +
                "\n" +
                "                        <font color=\"#000000\" size=\"2\"\n" +
                "                              th:align=\"center\">四,请谨慎对文件权限更改操作,以防他人误更新文件.由误操作带来的文件损失不由开发人员承担.</font>";
            window.parent.document.getElementById('coverbehidepage').style.display = "block";
            window.parent.document.getElementById('showMessageDiv').style.display = "block";
            //$("#coverbehidepage").show();
            //$("#showMessageDiv").show();
        }

        function closeShowMessage() {
            // $("#coverbehidepage").hide();
            // $("#showMessageDiv").hide();
            window.parent.document.getElementById('coverbehidepage').style.display = "none";
            window.parent.document.getElementById('showMessageDiv').style.display = "none";
        }

        function submitprivilegestatus() {
            var folderhtml = "";
            var fileshtml = "";
            var privilegeusers = "";
            var maxpageid = $("#maxPage");
            var n_currentPage = $("#n_currentPage");
            var inputpage = $("#_tp");
            var flag = $("#type").val();
            var image01 = $("#image01");
            var image02 = $("#image02");
            var image03 = $("#image03");
            var image04 = $("#image04");
            if (flag == "0") {
                alert("您没有管理权限，无法进行管理权限分配操作,如需要请向上级申请！");
                return false;
            }
            var privilegeusers = $("#SlectBox").val();
            // var gettype=Object.prototype.toString;
            //alert(gettype.call(privilegeusers))
            if (privilegeusers == "" || privilegeusers == null) {
                alert("请先选择要更改权限的人员！");
                return false;
            }
            var privilelist = new Array();
            //$("#some-element").busyLoad("show");
            window.parent.document.getElementById('coverbehidepage').style.display = "block";

            var trs = $("#showlistbody tr");
            for (var i = 0; i < trs.length; i++) {
                var trid = trs[i].id;//privilegenum
                if (trid != "showdiv" && trid != "nodatadiv" && trid != "pagetfoottr") {
                    privilelist[i] = trid;
                    $('input[name="privilegenum' + trid + '"]:checked').each(function () {
                        privilelist[i] += ":" + $(this).val();
                    });
                }
            }
            if (privilelist == "") {
                alert("没有任何数据，无法进行保存操作！");
                //$("#some-element").busyLoad("hide");
                window.parent.document.getElementById('coverbehidepage').style.display = "none";

                return;
            }
            var salor = $("#salorid").val();
            var engineer = $("#selectuser").val();
            var orderNo = $("#orderno").val();
            var projectName = $("#projectname").val();
            var fileName = $("#filename").val();
            var startNewestSaveDateStr = $("#startnewestsavedate").val()
            var endNewestSaveDateStr = $("#endnewestsavedate").val()
            var currentPage = $("#n_currentPage").val();
            var oprighter = $("#oprighter").val();
            var view = {
                salor: salor, //业务员
                engineer: engineer, //设计师
                orderNo: orderNo, //订单编号
                projectName: projectName, //项目编号
                fileName: fileName, //文件名
                startNewestSaveDateStr: startNewestSaveDateStr, //查询开始时间
                endNewestSaveDateStr: endNewestSaveDateStr, //查询结束时间
                currentPage: currentPage,
                LinshiId: oprighter
            };
            $.ajax({
                data: JSON.stringify({"privilegestrs": privilelist, "view": view, "privilegeusers": privilegeusers}),
                type: "POST",
                dataType: 'json',
                contentType: 'application/json;charset=UTF-8',
                async: false,
                traditional: true,
                url: "/fileupdown/updateandsaveprivilegestatus",
                success: function (msg) {
                    $("#oprighter").val("");
                    folderhtml = "";
                    image01.html("");
                    image02.html("");
                    image03.html("");
                    image04.html("");
                    var data = eval(msg);
                    var len = data.length;
                    var vililegeflags;
                    if (len >= 1) {
                        currentPage = data[0].currentPage; //当前页
                        totalPage = data[0].maxPage; //总多少页
                        totaldata = data[0].recordCount; //总共多少记录
                        pageSize = data[0].pageSize;
                        maxpageid.val(totalPage);
                        n_currentPage.val(currentPage);
                        inputpage.val(currentPage);
                        $.each(data, function (num) {
                            vililegeflags = data[num].opRight;
                            var indexc;
                            var extName;
                            if(data[num].folderOrFileName.indexOf(".") >= 0) {
                                 indexc = data[num].folderOrFileName.lastIndexOf('.');
                                 extName = data[num].folderOrFileName.substr(indexc + 1, data[num].folderOrFileName.length);
                            }
                            if (data[num].folderOrFileName.indexOf(".") <= 0 || !extensionarray.includes(extName.toLowerCase())) {
                                folderhtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                folderhtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                if (isNull(vililegeflags) != "") {
                                    if (vililegeflags.indexOf("2") > -1) {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value=\"2\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value=\"2\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    }
                                    if (vililegeflags.indexOf("3") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value=\"3\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"3\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    if (vililegeflags.indexOf("4") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value=\"4\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"4\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                } else {
                                    folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value=\"2\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"3\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"4\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                }
                                folderhtml += " <td width=\"15%\" align=\"center\">\n" +
                                    "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                    "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                    " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                    " <td width=\"36%\" align=\"left+\" id=\"" + isNull(data[num].orderNo) + "\"><img src=\"/images/icon/Folder.png\" " +
                                    " align=\"middle\" border=\"0\" value='" + data[num].folderOrFileName + "' ondblclick=\"shownextfolderorfiles(this)\"\n" +
                                    " style=\"width: 30px; height: 30px; vertical-align: middle\"/><i>" + data[num].folderOrFileName + "</i><td></tr>";
                            } else {
                                fileshtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                fileshtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                if (isNull(vililegeflags) != "") {
                                    if (vililegeflags.indexOf("2") > -1) {
                                        fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    } else {
                                        fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    }
                                    if (vililegeflags.indexOf("3") > -1) {
                                        fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    if (vililegeflags.indexOf("4") > -1) {
                                        fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                } else {
                                    fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                }
                                fileshtml += " <td width=\"15%\" align=\"center\">\n" +
                                    "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                    "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                    " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                    " <td width=\"36%\" align=\"left\"><i><img src=\"/images/icon/File.png\" align=\"middle\" border=\"0\"  style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num].folderOrFileName + "</i><td></tr>"
                            }
                            $("#foldername").val(data[num].folderOrFileName);
                        });
                        if (currentPage > 1) {
                            var imange01str = '<img src="/images/page/sy-2.jpg"  onClick="goPageone()"  align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                            imange01str += '<img src="/images/page/syy-2.jpg" onClick="goPrePage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                            image01.html(imange01str);
                        } else {
                            image01.html("");
                        }
                        if (currentPage <= 1) {
                            var image02str = '<img src="/images/page/l-sy-2.jpg" align="middle" border="0px"';
                            image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                            image02str += ' <img src="/images/page/l-syy-2.jpg" align="middle" border="0px"';
                            image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                            image02.html(image02str);
                        } else {
                            image02.html("");
                        }
                        if (currentPage < totalPage) {
                            var imange03str = '<img src="/images/page/xyy-2.jpg" onClick="goAftPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                            imange03str += '<img src="/images/page/my-2.jpg" onClick="goMaxPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                            image03.html(imange03str);
                        } else {
                            image03.html("");
                        }
                        if (currentPage >= totalPage) {
                            var image04str = '<img src="/images/page/l-xyy-1.jpg" align="middle" border="0px"';
                            image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                            image04str += ' <img src="/images/page/l-my-1.jpg" align="middle" border="0px"';
                            image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                            image04.html(image04str);
                        } else {
                            image04.html("");
                        }
                        $("#showdatatable").html(folderhtml + fileshtml)
                        $("#showdiv").show();
                        $("#pagetfoottr").hide();
                        $("#currentpagespan").val(currentPage);
                        $("#recordcountspan").html(totaldata)
                        $("#maxpagespan").html(totalPage);
                    } else {
                        $("#showdatatable").html("<tr><td colspan=\"9\" width='1200px' align='center'>查无数据</td></tr>");
                    }
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("保存成功")
                },
                error: function (data) {
                    // 隐藏loading
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("失败");
                }
            });
            //$("#some-element").busyLoad("hide");
            window.parent.document.getElementById('coverbehidepage').style.display = "none";

        }

        function isNull(arg1) {
            if (arg1 == "null" || arg1 == null || arg1 == 0 || arg1 == "0") {
                return "";
            }
            return arg1;
            //return !arg1 && arg1!==0 && typeof arg1!=="boolean"?true:false;
        }

        function Trim(str) {
            return str.replace(/(^\s*)|(\s*$)/g, "");
        }

        function checkOrderNo(str) {
            var newstr = str.value;
            //var reg = new RegExp(/^[0-9a-zA-Z]*$/g);
            if (Trim(newstr) != "") {
                var reg = new RegExp(/^[A-Z]{5}[0-9]{8}[A-Z]{2}[0-9]{2}$/g);
                if (!reg.test(str.value)) {
                    // $("#showalerttext").text("订单编号不符合规定格式，示范如：COSUN20190112WW01");
                    alert("订单编号不符合规定格式，示范如：COSUN20190112WW01");
                    $("#orderno").val("");
                    // document.getElementById("coverbehidepage").style.display = "block";
                    // document.getElementById("alertdiv").style.display = "block";
                    return false;
                }
            }
        }

        function goPriPageone() {
            // var flag = $("#type").val();
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！");
            //     return false;
            // }
            $("#n_currentPage").val(1);
            findFoldersByQueryParam();
        }

        function goPriPrePage() {
            // var flag = $("#type").val();
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！");
            //     return false;
            // }
            var currentpage = $("#_tp").val();
            $("#n_currentPage").val(currentpage * 1 - 1 * 1);
            findFoldersByQueryParam();
        }

        function goPriAftPage() {
            // var flag = $("#type").val();
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！");
            //     return false;
            // }
            var currentpage = $("#_tp").val();
            $("#n_currentPage").val(currentpage * 1 + 1 * 1);
            findFoldersByQueryParam();
        }

        function goPriMaxPage() {
            // var flag = $("#type").val();
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！");
            //     return false;
            // }
            $("#n_currentPage").val($("#maxPage").val());
            findFoldersByQueryParam();
        }

        var currentPage; //当前页
        var totalPage; //总多少页
        var totaldata; //总共多少记录
        var pageSize;//当前每页多少条
        function findFoldersByQueryParam() {
            var flag12 = $("#type").val();
            //if (flag12 == "0") {
            // alert("您没有管理权限，无法进行管理权限分配操作,如需要请向上级申请！");
            //  return false;
            // }
            var reg = new RegExp(/^[A-Z]{5}[0-9]{8}[A-Z]{2}[0-9]{2}$/g);
            var salor = $("#salorid").val();
            var engineer = $("#selectuser").val();
            var linshiOp = $("#oprighter").val();
            var orderNo = $("#orderno").val().trim();
            currentPage = $("#n_currentPage").val();

            var folderhtml = "";
            var fileshtml = "";
            //$("#some-element").busyLoad("show");//遮罩层开启
            window.parent.document.getElementById('coverbehidepage').style.display = "block";

            var jsonarray = {
                "salor": salor, //业务员
                "engineer": engineer, //设计师
                "orderNo": orderNo, //订单编号
                "projectName": $("#projectname").val(), //项目编号
                "fileName": $("#filename").val(), //文件名
                "startNewestSaveDateStr": $("#startnewestsavedate").val(), //查询开始时间
                "endNewestSaveDateStr": $("#endnewestsavedate").val(), //查询结束时间
                "currentPage": $("#n_currentPage").val(),
                "linshiId": linshiOp
            };
            var data = JSON.stringify(jsonarray);
            $.ajax({
                data: data,
                type: "POST",
                contentType: "application/json",//上传内容格式为json结构
                url: "/fileupdown/findFoldersByQueryParamNew",
                success: function (msg) {
                    var image01 = $("#image01");
                    var image02 = $("#image02");
                    var image03 = $("#image03");
                    var image04 = $("#image04");
                    var maxpageid = $("#maxPage");
                    var n_currentPage = $("#n_currentPage");
                    var inputpage = $("#_tp");
                    image01.html("");
                    image02.html("");
                    image03.html("");
                    image04.html("");
                    var tbody = $("#showdatatable");
                    var tfoot = $("#s_tfoot");
                    tbody.html("");
                    //folderhtml = "<table class=\"grid\" id=\"showlistbody\">";
                    folderhtml = "";
                    var data = eval(msg);
                    var len = data.length;
                    var vililegeflags;
                    if (len >= 1) {
                        $("#nodatadiv").hide();
                        $("#showdiv").show();
                        currentPage = data[0].currentPage; //当前页
                        totalPage = data[0].maxPage; //总多少页
                        totaldata = data[0].recordCount; //总共多少记录
                        username = data[0].userName;
                        password = data[0].userPwd;
                        pageSize = data[0].pageSize;
                        maxpageid.val(totalPage);
                        n_currentPage.val(currentPage);
                        inputpage.val(currentPage);
                        $.each(data, function (num) {
                            vililegeflags = data[num].opRight;
                            if (data[num].folderOrFileName.indexOf(".") <= 0) {
                                folderhtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                folderhtml += "<td width=\"4%\" align=\"center\">" + ((currentPage - 1) * 12 + num + 1) + "</td> ";
                                if (isNull(vililegeflags) != "") {
                                    if (vililegeflags.indexOf("2") > -1) {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value=\"2\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value=\"2\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    }
                                    if (vililegeflags.indexOf("3") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value=\"3\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"3\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    if (vililegeflags.indexOf("4") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value=\"4\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"4\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                } else {
                                    // folderhtml += "<td width=\"30px\" align=\"center\"><input  type=\"checkbox\"   value=\"1\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\"></td>";
                                    folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value=\"2\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"3\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value=\"4\" name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                }
                                folderhtml += " <td width=\"15%\" align=\"center\">\n" +
                                    "<span style=\"width:100%;\" >" + data[num].orderNo + "</span></td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                    "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                    " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                    " <td width=\"36%\" align=\"left+\"  id=\"" + isNull(data[num].orderNo) + "\"><img src=\"/images/icon/Folder.png\" " +
                                    " align=\"middle\" border=\"0\" value='" + data[num].folderOrFileName + "' ondblclick=\"shownextfolderorfiles(this)\"\n" +
                                    " style=\"width: 30px; height: 30px; vertical-align: middle\"/><i>" + data[num].folderOrFileName + "</i><td></tr>";
                            } else {
                                fileshtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                fileshtml += "<td width=\"4%\" align=\"center\">" + ((currentPage - 1) * 12 + num + 1) + "</td> ";
                                if (isNull(vililegeflags) != "") {
                                    if (vililegeflags.indexOf("2") > -1) {
                                        fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    } else {
                                        fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    }
                                    if (vililegeflags.indexOf("3") > -1) {
                                        fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    if (vililegeflags.indexOf("4") > -1) {
                                        fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                } else {
                                    // fileshtml += "<td width=\"30px\" align=\"center\"><input  type=\"checkbox\"   value='1' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\"></td>";
                                    fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                }
                                fileshtml += " <td width=\"15%\" align=\"center\">\n" +
                                    "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                    " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                    "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                    " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                    " <td width=\"36%\" align=\"left\"><i><img src=\"/images/icon/File.png\" align=\"middle\" border=\"0\"  style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num].folderOrFileName + "</i><td></tr>"
                            }
                            // $("#orderno").val(data[num].orderNo);
                            $("#foldername").val(data[num].folderOrFileName);
                        });
                        // $("#showdatatable").html(folderhtml + fileshtml)
                        if (currentPage > 1) {
                            var imange01str = '<img src="/images/page/sy-2.jpg"  onClick="goPageone()"  align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                            imange01str += '<img src="/images/page/syy-2.jpg" onClick="goPrePage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                            image01.html(imange01str);
                        } else {
                            image01.html("");
                        }
                        if (currentPage <= 1) {
                            var image02str = '<img src="/images/page/l-sy-2.jpg" align="middle" border="0px"';
                            image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                            image02str += ' <img src="/images/page/l-syy-2.jpg" align="middle" border="0px"';
                            image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                            image02.html(image02str);
                        } else {
                            image02.html("");
                        }
                        if (currentPage < totalPage) {
                            var imange03str = '<img src="/images/page/xyy-2.jpg" onClick="goAftPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                            imange03str += '<img src="/images/page/my-2.jpg" onClick="goMaxPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                            image03.html(imange03str);
                        } else {
                            image03.html("");
                        }
                        if (currentPage >= totalPage) {
                            var image04str = '<img src="/images/page/l-xyy-1.jpg" align="middle" border="0px"';
                            image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                            image04str += ' <img src="/images/page/l-my-1.jpg" align="middle" border="0px"';
                            image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                            image04.html(image04str);
                        } else {
                            image04.html("");
                        }

                        $("#showdiv").show();
                        $("#pagetfoottr").hide();
                        $("#currentpagespan").val(data[0].currentPage);
                        $("#n_currentPage").val(data[0].currentPage)
                        $("#recordcountspan").html(data[0].recordCount)
                        $("#_tp").val(data[0].currentPage);
                        $("#maxpagespan").html(data[0].maxPage);
                        $("#showdatatable").html(folderhtml + fileshtml);

                    } else {
                        $("#currentpagespan").val(0);
                        $("#n_currentPage").val(0)
                        $("#_tp").val(0);
                        $("#maxpagespan").html(0);
                        $("#recordcountspan").html(0)
                        $("#nodatadiv").show();
                        $("#showdiv").hide();

                    }
                },
                error: function (msg) {
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("查询失败");
                }
            });
            //$("#some-element").busyLoad("hide");//遮罩层开启
            window.parent.document.getElementById('coverbehidepage').style.display = "none";

        }

        var topfolder;

        function backFolder3() {

            current_num = 1;
            var foldername = $("#foldername").val();
            var reg = new RegExp(/^[A-Z]{5}[0-9]{8}[A-Z]{2}[0-9]{2}$/g);
            var salor = $("#salor").val();
            var engineer = $("#engineer").val();
            var orderNo = $("#orderno").val().trim();
            var fileInput = $('#file').val();
            var folderhtml = "";
            var fileshtml = "";
            var cominone2 = 0;
            if (orderNo == "" || orderNo == null) {
                alert("点击返回的时候，订单编号不能为空！请不要删空它。")
                return;
            }
            //$("#some-element").busyLoad("show");
            window.parent.document.getElementById('coverbehidepage').style.display = "block";

            //$("#some-element").busyLoad("show");//遮罩层开启
            //var trid = $(foldername).parent().parent().parent().find("td:eq(7)").text();
            var trid = $('#showlistbody').find('tr:eq(0)').find('td:eq(7)').attr("name");
            var jsonarray = {
                "salor": salor, //业务员
                "engineer": engineer, //设计师
                "orderNo": orderNo, //订单编号
                "folderName": foldername,//当前文件夹名
                "linshiId": trid
            };
            var data = JSON.stringify(jsonarray);
            $.ajax({
                data: data,
                type: "POST",
                contentType: "application/json",//上传内容格式为json结构
                url: "/fileupdown/findBackFoldersByQueryParam3New",
                success: function (msg) {
                    folderhtml = "";
                    var data = eval(msg); //data为URLS
                    var totalnum = data.length;
                    var vililegeflags;
                    if (totalnum >= 1) {
                        $.each(data, function (num) {
                            var ind = data[num].folderOrFileName.lastIndexOf('.');
                            var extenName = data[num].folderOrFileName.substr(ind + 1, data[num].folderOrFileName.length);
                            vililegeflags = data[num].opRight;
                            if (reg.test(data[num].folderOrFileName)) {
                                $("#backfolder").attr("disabled", "disabled");
                            }
                            if (num < 12) {
                                if (data[num].folderOrFileName.indexOf(".") <= 0 || !extensionarray.includes(extenName.toLowerCase())) {
                                    folderhtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                    folderhtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                    if (isNull(vililegeflags) != "") {
                                        if (vililegeflags.indexOf("2") > -1) {
                                            folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        if (vililegeflags.indexOf("3") > -1) {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        if (vililegeflags.indexOf("4") > -1) {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                    } else {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    folderhtml += " <td width=\"15%\" align=\"center\">\n" +
                                        "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                        "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                        " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                        " <td width=\"36%\" align=\"left+\"  id=\"" + isNull(data[num].orderNo) + "\"><img src=\"/images/icon/Folder.png\" " +
                                        " align=\"middle\" border=\"0\" value='" + data[num].folderOrFileName + "' ondblclick=\"shownextfolderorfiles(this)\"\n" +
                                        " style=\"width: 30px; height: 30px; vertical-align: middle\"/><i>" + data[num].folderOrFileName + "</i><td></tr>";
                                } else {
                                    if (extensionarray.includes(extenName.toLowerCase())) {
                                        fileshtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                        fileshtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td>";
                                        if (isNull(vililegeflags) != "") {
                                            if (vililegeflags.indexOf("2") > -1) {
                                                fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            } else {
                                                fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            }
                                            if (vililegeflags.indexOf("3") > -1) {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            } else {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            }
                                            if (vililegeflags.indexOf("4") > -1) {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            } else {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            }
                                        } else {
                                            fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        fileshtml += " <td width=\"15%\" align=\"center\">\n" +
                                            "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                            "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                            " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                            " <td width=\"36%\" align=\"left\"><i><img src=\"/images/icon/File.png\" align=\"middle\" border=\"0\"  style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num].folderOrFileName + "</i><td></tr>"
                                    }
                                }
                            } else {
                                if (data[num].folderOrFileName.indexOf(".") <= 0 || !extensionarray.includes(extenName.toLowerCase())) {
                                    folderhtml += "<tr  id=\"" + data[num].orderNo + data[num].folderOrFileName + "\" style=\"display:none\">";
                                    folderhtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                    if (isNull(vililegeflags) != "") {
                                        if (vililegeflags.indexOf("2") > -1) {
                                            folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        } else {
                                            folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        }
                                        if (vililegeflags.indexOf("3") > -1) {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        if (vililegeflags.indexOf("4") > -1) {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                    } else {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    folderhtml += " <td width=\"15%\" align=\"center\">\n" +
                                        "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                        "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                        " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                        " <td width=\"36%\" align=\"left+\"  id=\"" + isNull(data[num].orderNo) + "\"><img src=\"/images/icon/Folder.png\" " +
                                        " align=\"middle\" border=\"0\" value='" + data[num].folderOrFileName + "' ondblclick=\"shownextfolderorfiles(this)\"\n" +
                                        " style=\"width: 30px; height: 30px; vertical-align: middle\"/><i>" + data[num].folderOrFileName + "</i><td></tr>";
                                } else {
                                    if (extensionarray.includes(extenName.toLowerCase())) {
                                        fileshtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\" style=\"display:none\">";
                                        fileshtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                        if (isNull(vililegeflags) != "") {
                                            if (vililegeflags.indexOf("2") > -1) {
                                                fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                            } else {
                                                fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                            }
                                            if (vililegeflags.indexOf("3") > -1) {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            } else {
                                                folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            }
                                            if (vililegeflags.indexOf("4") > -1) {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            } else {
                                                fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            }
                                        } else {
                                            fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        fileshtml += " <td width=\"15%\" align=\"center\">\n" +
                                            "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                            "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                            " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                            " <td width=\"36%\" align=\"left\"><i><img src=\"/images/icon/File.png\" align=\"middle\" border=\"0\"  style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num].folderOrFileName + "</i><td></tr>"
                                    }
                                }

                            }

                            $("#orderno").val(data[num].orderNo);
                            $("#foldername").val(data[num].folderOrFileName);
                        });

                        $("#showdiv").hide();
                        $("#pagetfoottr").show();
                        $("#showdatatable").html(folderhtml + fileshtml);
                        var next = $(".next");//下一页
                        var prev = $(".prev");//上一页
                        $(".total").text(data[0].maxPage);//显示总页数
                        $(".current_page").text(current_num);//当前的页数
                        total_page = data[0].maxPage;
                    } else {
                        $("#showdatatable").html("<tr><td colspan=\"10\" width='1200px' align='center'>查无数据</td></tr>");
                    }
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                },
                error: function (msg) {
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("查询失败");
                }
            });
            // $("#some-element").busyLoad("hide");//遮罩层开启
            window.parent.document.getElementById('coverbehidepage').style.display = "none";

        }

        function backFolder() {
            var foldername = $("#foldername").val();
            var salor = $("#salorid").val();
            var engineer = $("#selectuser").val();
            var orderNo = $("#orderno").val().trim();
            var folderhtml = "";
            var fileshtml = "";
            // if (salor == "") {
            //     alert("请选择业务人员!");
            //     return false;
            // }
            // if (engineer == "") {
            //     alert("请选择设计师!");
            //     return false;
            // }
            // if (orderNo == "") {
            //     alert("请填写订单编号!");
            //     return false;
            // }
            //$("#some-element").busyLoad("show");//遮罩层开启
            window.parent.document.getElementById('coverbehidepage').style.display = "block";

            var jsonarray = {
                "salor": salor, //业务员
                "engineer": engineer, //设计师
                "orderNo": orderNo, //订单编号
                "folderName": foldername//当前文件夹名
            };
            var data = JSON.stringify(jsonarray);
            $.ajax({
                data: data,
                type: "POST",
                contentType: "application/json",//上传内容格式为json结构
                url: "/fileupdown/findBackFoldersByQueryParam3",
                success: function (msg) {
                    var data = eval(msg);
                    $.each(data, function (num) {
                        if (data[num].indexOf(".") <= 0) {
                            $("#foldername").val(data[num]);
                            folderhtml += "<li><img src=\"/images/icon/Folder.png\" " +
                                " align=\"middle\" border=\"0\" ondblclick=\"shownextfolderorfiles('" + data[num] + "')\"\n" +
                                " style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num] + "</li>";
                        } else {
                            fileshtml += "<li>" + data[num] + "</li>";
                        }
                    });
                    $("#innerfolderdiv").html(folderhtml + fileshtml)
                },
                error: function (msg) {
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("查询失败");
                }
            });
            // $("#some-element").busyLoad("hide");
            window.parent.document.getElementById('coverbehidepage').style.display = "none";

        }

        function isNumber(val) {
            var regPos = /^\d+(\.\d+)?$/;
            var regNeg = /^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;
            if (regPos.test(val) || regNeg.test(val)) {
                return true;
            } else {
                return false;
            }
        }

        function trim(str) {
            return str.replace(/(^\s*)|(\s*$)/g, "");
        }

        function shownextfolderorfiles(foldername) {
            current_num = 1;
            foldername1 = foldername.getAttribute("value");
            var reg = new RegExp(/^[A-Z]{5}[0-9]{8}[A-Z]{2}[0-9]{2}$/g);
            $("#backfolder").removeAttr("disabled");
            var salor = $("#salorid").val();
            var engineer = $("#selectuser").val();
            var orderNo = $("#orderno").val().trim();
            if (orderNo == "") {
                if (reg.test(foldername1)) {
                    orderNo = foldername1;
                }
            }

            if (orderNo == "") {
                alert("进行点击文件夹操作,请不要删除输入框的订单编号!");
                return;
            }
            //$("#some-element").busyLoad("show");
            window.parent.document.getElementById('coverbehidepage').style.display = "block";

            var folderhtml = "";
            var fileshtml = "";
            // if (salor == "") {
            //     alert("请选择业务人员!");
            //     return false;
            // }
            // if (engineer == "") {
            //     alert("请选择设计师!");
            //     return false;
            // }
            // if (orderNo == "") {
            //     alert("请填写订单编号!");
            //     return false;
            // }
            var trid = $(foldername).parent().parent().find("td:eq(7)").attr("name");
            //$(this).parent().find("td:eq(0)")
            //$("#some-element").busyLoad("show");//遮罩层开启
            window.parent.document.getElementById('coverbehidepage').style.display = "block";

            var jsonarray = {
                "salor": salor, //业务员
                "engineer": engineer, //设计师
                "orderNo": orderNo, //订单编号
                "folderName": foldername1,//当前文件夹名
                "linshiId": trid
            };
            var data = JSON.stringify(jsonarray);
            $.ajax({
                data: data,
                type: "POST",
                contentType: "application/json",//上传内容格式为json结构
                url: "/fileupdown/findNextFoldersByQueryParam5DownView",
                success: function (msg) {
                    folderhtml = "";
                    var data = eval(msg);
                    var totalnum = data.length;
                    var vililegeflags;
                    if (totalnum >= 1) {
                        $.each(data, function (num) {
                            var ind = data[num].folderOrFileName.lastIndexOf('.');
                            var extenName = data[num].folderOrFileName.substr(ind + 1, data[num].folderOrFileName.length);
                            vililegeflags = data[num].opRight;
                            if (reg.test(data[num].folderOrFileName)) {
                                $("#backfolder").attr("disabled", "disabled");
                            }
                            if (num < 12) {
                                if (data[num].folderOrFileName.indexOf(".") <= 0 || !extensionarray.includes(extenName.toLowerCase())) {
                                    folderhtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                    folderhtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                    if (vililegeflags.indexOf("2") > -1) {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    } else {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    }
                                    if (vililegeflags.indexOf("3") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    if (vililegeflags.indexOf("4") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    folderhtml += " <td width=\"15%\" align=\"center\">\n" +
                                        "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                        "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                        " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                        " <td width=\"36%\" align=\"left+\"  id=\"" + isNull(data[num].orderNo) + "\"><img src=\"/images/icon/Folder.png\" " +
                                        " align=\"middle\" border=\"0\" value='" + data[num].folderOrFileName + "' ondblclick=\"shownextfolderorfiles(this)\"\n" +
                                        " style=\"width: 30px; height: 30px; vertical-align: middle\"/><i>" + data[num].folderOrFileName + "</i><td></tr>";
                                } else {
                                    if (extensionarray.includes(extenName.toLowerCase())) {

                                        fileshtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                        fileshtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                        if (vililegeflags.indexOf("2") > -1) {
                                            fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        } else {
                                            fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        }
                                        if (vililegeflags.indexOf("3") > -1) {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        if (vililegeflags.indexOf("4") > -1) {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        fileshtml += " <td width=\"15%\" align=\"center\">\n" +
                                            "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                            "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                            " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                            " <td width=\"36%\" align=\"left\"><i><img src=\"/images/icon/File.png\" align=\"middle\" border=\"0\"  style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num].folderOrFileName + "</i><td></tr>"
                                    }
                                }


                            } else {
                                if (data[num].folderOrFileName.indexOf(".") <= 0 || !extensionarray.includes(extenName.toLowerCase())) {
                                    folderhtml += "<tr style=\"display:none\" id=\"" + data[num].orderNo + data[num].folderOrFileName + "\">";
                                    folderhtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                    if (vililegeflags.indexOf("2") > -1) {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    } else {
                                        folderhtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                    }
                                    if (vililegeflags.indexOf("3") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    if (vililegeflags.indexOf("4") > -1) {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    } else {
                                        folderhtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                    }
                                    folderhtml += " <td width=\"15%\" align=\"center\">\n" +
                                        "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                        " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                        "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                        " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                        " <td width=\"36%\" align=\"left+\"  id=\"" + isNull(data[num].orderNo) + "\"><img src=\"/images/icon/Folder.png\" " +
                                        " align=\"middle\" border=\"0\" value='" + data[num].folderOrFileName + "' ondblclick=\"shownextfolderorfiles(this)\"\n" +
                                        " style=\"width: 30px; height: 30px; vertical-align: middle\"/><i>" + data[num].folderOrFileName + "</i><td></tr>";
                                } else {
                                    if (extensionarray.includes(extenName.toLowerCase())) {
                                        fileshtml += "<tr id=\"" + data[num].orderNo + data[num].folderOrFileName + "\"  style=\"display:none\">";
                                        fileshtml += "<td width=\"4%\" align=\"center\">" + (num + 1) + "</td> ";
                                        if (vililegeflags.indexOf("2") > -1) {
                                            fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" checked value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        } else {
                                            fileshtml += "<td width=\"5%\" align=\"center\"><input type=\"checkbox\" value='2' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td> ";
                                        }
                                        if (vililegeflags.indexOf("3") > -1) {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='3' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        if (vililegeflags.indexOf("4") > -1) {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" checked value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        } else {
                                            fileshtml += "<td width=\"4%\" align=\"center\"><input type=\"checkbox\" value='4' name=\"privilegenum" + data[num].orderNo + data[num].folderOrFileName + "\" ></td>";
                                        }
                                        fileshtml += " <td width=\"15%\" align=\"center\">\n" +
                                            "<span style=\"width:150px;height:50px;\" >" + data[num].orderNo + "</span></td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].salor + "</i> </td> " +
                                            " <td width=\"6%\" align=\"center\"> <i>" + data[num].engineer + "</i> </td> " +
                                            "<td width=\"5%\" align=\"center\" name='" + isNull(data[num].oprighter) + "'>" + isNull(data[num].fullName) + "</td>" +
                                            " <td width=\"15%\" align=\"center\"> <i>" + data[num].createTime + "</i> </td> " +
                                            " <td width=\"36%\" align=\"left\"><i><img src=\"/images/icon/File.png\" align=\"middle\" border=\"0\"  style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num].folderOrFileName + "</i><td></tr>"
                                    }

                                }
                            }

                            $("#orderno").val(data[num].orderNo);
                            $("#foldername").val(data[num].folderOrFileName);
                        });
                        $("#showdiv").hide();
                        $("#pagetfoottr").show();
                        $("#showdatatable").html(folderhtml + fileshtml);

                        // views.get(0).setMaxPage(maxPage);//总页数
                        // views.get(0).setCurrentPage(1);//当前页 默认1
                        // views.get(0).setRecordCount(views.size());//总数

                        var next = $(".next");//下一页
                        var prev = $(".prev");//上一页
                        $(".total").text(data[0].maxPage);//显示总页数
                        $(".current_page").text(current_num);//当前的页数
                        $("#n_currentPage").val(data[0].currentPage)
                        total_page = data[0].maxPage;
                        $("#_tp").val(data[0].currentPage);
                        $("#currentpagespan").val(data[0].currentPage)

                    } else {
                        $("#innerfolderdiv").html("<table class=\"grid\"><tr><td colspan=\"10\" width='1200px' align='center'>查无数据</td></tr></table>");
                    }
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";
                },
                error: function (msg) {
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("查询失败");
                }
            });
            //$("#some-element").busyLoad("hide");//遮罩层开
            window.parent.document.getElementById('coverbehidepage').style.display = "none";

        }

        function submitQueryByConditionParam() {
            // var flag = $("#type").val();
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！");
            //     return false;
            // }
            //$("#some-element").busyLoad("show");//遮罩层开启
            window.parent.document.getElementById('coverbehidepage').style.display = "block";
            var jsonarray = {
                "salor": $("#salorid").val(), //业务员
                "engineer": $("#selectuser").val(), //设计师
                "orderNo": $("#orderno").val(), //订单编号
                "projectName": $("#projectname").val(), //项目编号
                "fileName": $("#filename").val(), //文件名
                "startNewestSaveDateStr": $("#startnewestsavedate").val(), //查询开始时间
                "endNewestSaveDateStr": $("#endnewestsavedate").val(), //查询结束时间
                "currentPage": $("#n_currentPage").val(),
                "oprighter": $("#oprighter").val()
            };
            var data = JSON.stringify(jsonarray);
            $.ajax({
                data: data,
                type: "POST",
                contentType: "application/json",//上传内容格式为json结构
                url: "/fileupdown/findfileurlbyconditionparam",
                success: function (msg) {
                    var data = eval(msg);
                    var num = 0;
                    var tr = "";
                    var image01 = $("#image01");
                    var image02 = $("#image02");
                    var image03 = $("#image03");
                    var image04 = $("#image04");
                    var maxpageid = $("#maxPage");
                    var n_currentPage = $("#n_currentPage");
                    var inputpage = $("#_tp");
                    image01.html("");
                    image02.html("");
                    image03.html("");
                    image04.html("");
                    var td = "";
                    var tbody = $("#showlistbody");
                    var tfoot = $("#s_tfoot");
                    tbody.html("");
                    if (data != null && data != "") {
                        $("#nodatadiv").hide();
                        $("#showdiv").show();
                        currentPage = data[0].currentPage; //当前页
                        totalPage = data[0].maxPage; //总多少页
                        totaldata = data[0].recordCount; //总共多少记录
                        pageSize = data[0].pageSize;
                        maxpageid.val(totalPage);
                        n_currentPage.val(currentPage);
                        inputpage.val(currentPage);
                        $.each(data, function (num) {
                            tr = $("<tr id='" + data[num].id + "'></tr>");
                            tr.append("<td>" + ((num + 1) + ((n_currentPage.val() - 1) * pageSize)) + "</td>");
                            tr.append("<td>" + isNull(data[num].creator) + "</td>");
                            tr.append("<td>" + isNull(data[num].lastUpdator) + "</td>");
                            tr.append("<td>" + isNull(data[num].fileName) + "</td>");
                            tr.append("<td>" + isNull(data[num].salor) + "</td>");
                            tr.append("<td>" + isNull(data[num].orderNo) + "</td>");
                            tr.append("<td>" + isNull(data[num].projectName) + "</td>");
                            tr.append("<td>" + isNull(data[num].createtime) + "</td>");
                            tr.append("<td>" + isNull(data[num].lastUpdateTime) + "</td>");
                            tr.append("<td>" + isNull(data[num].singleFileUpdateNum) + "</td>");
                            tr.append("<td>" + isNull(data[num].modifyReason) + "</td>");
                            td = "<td>";
                            var vililegeflags = data[num].opRight;
                            if (isNull(vililegeflags) != "") {
                                td = "<td>";
                                if (vililegeflags.indexOf("1") > -1) {
                                    td += ('<input name="privilegenum' + data[num].id + '" checked="checked" type="checkbox" value="1" />下载');
                                } else {
                                    td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="1" />下载');
                                }
                                if (vililegeflags.indexOf("2") > -1) {
                                    td += ('<input name="privilegenum' + data[num].id + '" checked="checked" type="checkbox" value="2" />修改');
                                } else {
                                    td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="2" />修改');
                                }
                                if (vililegeflags.indexOf("3") > -1) {
                                    td += ('<input name="privilegenum' + data[num].id + '" checked="checked" type="checkbox" value="3" />删除');
                                } else {
                                    td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="3" />删除');
                                }
                                // if (vililegeflags.indexOf("4") > -1) {
                                //     td += ('<input name="privilegenum' + data[num].id + '" checked="checked" type="checkbox" value="4" />取消');
                                // } else {
                                //     td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="4" />取消');
                                // }
                                td += "</td>";
                            } else {
                                td = ('<td><input name="privilegenum' + data[num].id + '"  type="checkbox" value="1" />下载');
                                td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="2" />修改');
                                td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="3" />删除</td>');
                                // td += ('<input name="privilegenum' + data[num].id + '"  type="checkbox" value="4" />取消');
                            }
                            tr.append(td);
                            tr.appendTo(tbody);
                        });
                        $("#currentpagespan").html(currentPage);
                        $("#maxpagespan").html(totalPage);
                        $("#recordcountspan").html(totaldata);
                        if (currentPage > 1) {
                            var imange01str = '<img src="/images/page/sy-2.jpg"  onClick="goPriPageone()"  align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                            imange01str += '<img src="/images/page/syy-2.jpg" onClick="goPriPrePage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                            image01.html(imange01str);
                        } else {
                            image01.html("");
                        }
                        if (currentPage <= 1) {
                            var image02str = '<img src="/images/page/l-sy-2.jpg" align="middle" border="0px"';
                            image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                            image02str += ' <img src="/images/page/l-syy-2.jpg" align="middle" border="0px"';
                            image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                            image02.html(image02str);
                        } else {
                            image02.html("");
                        }
                        if (currentPage < totalPage) {
                            var imange03str = '<img src="/images/page/xyy-2.jpg" onClick="goPriAftPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                            imange03str += '<img src="/images/page/my-2.jpg" onClick="goPriMaxPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                            image03.html(imange03str);
                        } else {
                            image03.html("");
                        }
                        if (currentPage >= totalPage) {
                            var image04str = '<img src="/images/page/l-xyy-1.jpg" align="middle" border="0px"';
                            image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                            image04str += ' <img src="/images/page/l-my-1.jpg" align="middle" border="0px"';
                            image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                            image04.html(image04str);
                        } else {
                            image04.html("");
                        }
                    } else {
                        $("#nodatadiv").show();
                        $("#showdiv").hide();
                    }
                    // 隐藏loading
                    // $("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                },
                error: function (msg) {
                    // 隐藏loading
                    //$("#some-element").busyLoad("hide");
                    window.parent.document.getElementById('coverbehidepage').style.display = "none";

                    alert("失败");
                }
            });
        }

        function goPagePri() {
            // var flag = $("#type").val();
            // if(flag =="0"){
            //     alert("您没有管理权限，无法进行管理页面的任何操作,如需要请向上级申请！");
            //     $("#type").val("1");
            //     return false;
            // }
            var tp = document.getElementById("_tp").value;//currentPage
            var max = $("#maxPage").val(); //maxPage
            tp = tp.trim();
            var r = /^\+?[0-9][0-9]*$/;
            if (!(r.test(tp))) {
                alert("页数输入有误，请重新输入!");
                $("#_tp").val(max);
                return false;
            } else if (parseInt(tp) == 0) {
                alert("页数必须大于0!");
                $("#_tp").val(max);
                return false;
            } else if (parseInt(tp) > parseInt(max)) {
                alert("不能大于总页数!");
                $("#_tp").val(max);
                return false;
            } else {
                $("#n_currentPage").val(tp);
                // document.forms["form0"].submit();
                submitQueryByConditionParam();
            }
        }
    </script>
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
    <div id="coverbehidepage" style="display: none"></div>
    <div id="">

        <div id="tabs">

            <a class="btn btn-default"
               th:href="@{/fileupdown/tomainpage(currentPage=${view.currentPage})}">上传</a>

            <a class="btn  btn-default"
               th:href="@{/fileupdown/tomodifypage(currentPage=${view.currentPage})}">更新</a>


            <a class="btn btn-default"
               th:href="@{/fileupdown/download(currentPage=${view.currentPage})}">
                下载</a>
            <a class="btn btn-default"
               th:href="@{/fileupdown/todeletepage(currentPage=${view.currentPage})}">删除</a>
            <a class="btn btn-default"
               th:href="@{/fileupdown/tobroserfilepage(currentPage=${view.currentPage})}">查找</a>

            <a class="btn btn-primary"
               th:href="@{/fileupdown/toprivilmanagepage(pageSize=12,currentPage=${view.currentPage})}">管理</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


            <a onclick="alertMessageDiv()" href="#"><font color="#FF0000"
                                                          size="2"><u><strong>使用说明</strong></u></font></a>


            <p>

            <form id="queryform" th:action="@{/fileupdown/downloadbyquerycondition}" method="post"
                  style="margin-left: 0px;margin-top: 15px;margin-right: 35px;margin-bottom: 15px;">
                <input type="hidden" id="maxPage" th:value="${view.maxPage}">
                <input type="hidden" id="n_currentPage" name="view.currentPage" th:value="${view.currentPage}"/>
                <input type="hidden" id="flag" th:value="${view.flag}">
                <input type="hidden" id="type" th:value="${view.type}">
                <input type="hidden" th:value="${extensionList}" id="extension">
                <input type="hidden" id="total_page">
                <div id="div1css">
                    <fieldset>
                        <!--<legend>查询条件</legend>-->
                        <table width="100%">
                            <tr>
                                <td align="right">
                                    设计师:
                                </td>
                                <td>
                                    <select name="selectuser" id="selectuser" style="width: 153px">
                                        <option value="" selected="selected">请选择设计师</option>
                                        <option th:each="c:${userInfos}" th:value="${c.uId}"
                                                th:text="${c.fullName}"></option>
                                    </select>
                                </td>
                                <td align="right">订单编号:</td>
                                <td><input type="text" id="orderno" name="view.orderNo" style="width:180px"
                                           onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"
                                           onblur="checkOrderNo(this)"/>
                                </td>
                                <td align="right"> 顶目名称:</td>
                                <td><input type="text" id="projectname" name="view.projectName" style="width:180px"
                                           onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"/>
                                </td>
                                <td align="right"> 权限者:</td>
                                <td>
                                    <select id="oprighter" style="width: 153px" name="view.oprighter">
                                        <option value="" selected="selected">选择权限者</option>
                                        <option th:each="c:${userInfos}" th:value="${c.uId}"
                                                th:text="${c.fullName}"></option>
                                    </select>
                                </td>

                            </tr>
                            <tr>
                                <td align="right">业务员:</td>
                                <td>
                                    <select id="salorid" style="width: 153px" name="*{salor}">
                                        <option value="" selected="selected">请选择业务员</option>
                                        <option th:each="c:${employees}" th:value="${c.name}"
                                                th:text="${c.name}"></option>

                                    </select>

                                </td>
                                <td align="right">文件名称:</td>
                                <td><input type="text" id="filename" name="view.fileName" style="width:180px"
                                           onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"/>
                                </td>
                                <td align="right">最近上传时间:</td>
                                <td colspan="2" th:align="left">
                                    <input type="text" style="width:120px" id="startnewestsavedate" readOnly="true"
                                           name="view.startNewestSaveDate" class="Wdate"
                                           onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"
                                           onclick="WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'#F{$dp.$D(\'endnewestsavedate\')}'})"/>
                                    至：
                                    <input type="text" id="endnewestsavedate" style="width:120px"
                                           name="view.endnewestsavedate" class="Wdate"
                                           onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"
                                           onclick="WdatePicker({dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'startnewestsavedate\')}'})"/>
                                </td>

                                <td th:align="right">
                                    <input type="button" id="submitQueryByConditionbutton"
                                           onclick="findFoldersByQueryParam()" value="查询"/>&nbsp;
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
                <div id="div2css">
                    <table width="100%">
                        <tr>
                            <td style="width: 100px" align="right">权限被修改者：</td>
                            <td align="left" style="width: 200px;">
                                <select multiple="multiple" placeholder="权限被更改者"
                                        class="SlectBox" id="SlectBox"
                                        required style="width: 145px">
                                    <option th:each="c:${userInfos}" th:value="${c.uId}"
                                            th:text="${c.fullName}"></option>

                                </select>

                            </td>
                            <td align="right"><input type="button" onclick="submitprivilegestatus()" value="保存">
                            </td>

                        </tr>
                    </table>
                    &nbsp;&nbsp;
                </div>
            </form>
            <input type="hidden" id="foldername">
            <div id="some-element1">
                <div id="folderdiv">
                    <p>
                        &nbsp;&nbsp;&nbsp;&nbsp;<input type="button" id="backfolder" disabled value="返回上一级"
                                                       onclick="backFolder3();">
                    <div id="titlename">
                        <table class="grid" style="width: 100%" id="tablecsshead">
                            <thead style="background-color: #E0EEEE" align="center" id="urlthead">
                            <th width="3%">序号</th>
                            <th width="3%">更新</th>
                            <th width="3%">下载</th>
                            <th width="3%">删除</th>
                            <th width="10%">订单编号</th>
                            <th width="4%">业务员</th>
                            <th width="4%">设计师</th>
                            <th width="4%">权限者</th>
                            <th width="10%">最新上传/更新时间</th>
                            <th width="25%">文件夹或文件名</th>
                            </thead>
                        </table>
                    </div>

                    <div id="innerfolderdiv">
                        <table class="grid" id="showlistbody" style="width: 100%">
                            <tbody id="showdatatable">
                            <div th:unless="${#lists.isEmpty(views)}" id="innerfolderdivforTable">
                                <div th:each="view ,iterStat: ${views}">
                                    <tr th:id="${view.orderNo}+${view.orderNo}">
                                        <td width="3%" align="center" th:text="${iterStat.count}">
                                        </td>
                                        <td width="3%" align="center">
                                            <input type="checkbox" th:value="2"
                                                   th:name="'privilegenum'+${view.orderNo}+${view.orderNo}"
                                                   th:checked="${view.updatePrivilege eq '2' }">
                                        </td>
                                        <td width="3%" align="center">
                                            <input type="checkbox" th:value="3"
                                                   th:name="'privilegenum'+${view.orderNo}+${view.orderNo}"
                                                   th:checked="${view.downloadPrivilege eq '3' }">
                                        </td>
                                        <td width="3%" align="center">
                                            <input type="checkbox" th:value="4"
                                                   th:name="'privilegenum'+${view.orderNo}+${view.orderNo}"
                                                   th:checked="${view.deletePrivilege eq '4' }">
                                        </td>
                                        <td width="3%" align="center">
                                            <span style="width:150px;height:50px;" th:text="${view.orderNo}"></span>
                                        </td>
                                        <td width="4%" align="center">
                                            <i th:text="${view.salor}"></i>
                                        </td>
                                        <td width="4%" align="center">
                                            <i th:text="${view.engineer}"></i>
                                        </td>
                                        <td width="4%" align="center" th:text="${view.oprighter}">
                                        </td>
                                        <td width="6%" align="center">
                                            <i th:text="${view.createTime}"></i>
                                        </td>
                                        <td width="25%" align="left" th:id="${view.orderNo}">
                                            <img src="/images/icon/Folder.png" align="middle" border="0"
                                                 th:value="${view.orderNo}" ondblclick="shownextfolderorfiles(this)"
                                                 style="width: 30px; height: 30px; vertical-align: middle"
                                                 th:text="${view.orderNo}">

                                        </td>
                                    </tr>
                                </div>
                            </div>
                            <div th:if="${#lists.isEmpty(views)}">
                                <tr>
                                    <td colspan="10" width="1200px" align="center">查无数据</td>
                                </tr>
                            </div>
                            </tbody>
                            <tfoot id="s_tfoot">

                            <tr id="showdiv">

                                <td align="center" colspan="10">
                                    <span>第</span>
                                    <span th:text="${view.currentPage}" id="currentpagespan"> </span>
                                    <span>页|共</span>
                                    <span th:text="${view.maxPage}" id="maxpagespan"> </span>
                                    <span>页|共</span>
                                    <span th:text="${view.recordCount}" id="recordcountspan"> </span>
                                    <span>条记录 </span>
                                    <span id="image01">
                            <span th:if="${view.currentPage gt 1}">
                                    <img src="/images/page/sy-2.jpg" align="middle" border="0"
                                         style="width: 20px; height: 20px; vertical-align: middle"
                                         onClick="goPageone()"/>
                                    <img src="/images/page/syy-2.jpg" align="middle" border="0" onClick="goPrePage()"
                                         style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;
                                </span>
                                </span>
                                    <span id="image02">
                            <span th:if="${view.currentPage le 1}">
                                <img src='/images/page/l-sy-2.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>
                                <img src='images/images/page/l-syy-2.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;
                            </span>
                            </span>
                                    <span id="image03">
                            <span th:if="${view.currentPage lt view.maxPage}">
                                    <img src="/images/page/xyy-2.jpg" align="middle" border="0" onClick="goAftPage()"
                                         style="width: 20px; height: 20px; vertical-align: middle"/>
                                    <img src="/images/page/my-2.jpg" align="middle" border="0" onClick="goMaxPage()"
                                         style="width: 20px; height: 20px; vertical-align: middle"/>
                            </span>
                                </span>
                                    <span id="image04">
                            <span th:if="${view.currentPage ge view.maxPage}">
                                <img src='/images/page/l-xyy-1.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>
                                <img src='/images/page/l-my-1.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>
                            </span>
                            </span>

                                    |&nbsp;到第
                                    <input onkeypress="if(event.keyCode==13) {gopage.click();return false;}"
                                           style="width: 50px"
                                           id="_tp" th:name="currentPage" type="text"
                                           th:value="${view.currentPage}"/>
                                    页&nbsp;
                                    <img src="/images/page/cx-2.jpg" id="gopage" onClick="goPage2()"
                                         style="width:20px;height:20px;vertical-align:middle">
                                </td>

                            </tr>


                            <tr style="display:none;" id="nodatadiv">
                                <td align="center" width="1100px">
                                    查无数据
                                </td>
                            </tr>

                            <tr class="page_btn clear" style="display:none;" id="pagetfoottr" align="center">
                                <td colspan="10" align="center">
                                       <span class="page_box">
                                           <a class="prev">上一页</a>
                                       <span class="num"><span class="current_page">1</span>
                                       <span style="padding:0 3px;">/</span>
                                           <span class="total"></span></span>
                                           <a class="next">下一页</a></span>
                                </td>
                            </tr>


                            </tfoot>
                        </table>
                    </div>

                </div>

            </div>
        </div>

    </div>


    <div id="showMessageDiv" style="display: none">
        <div id="innershowMessageDiv">
            <div id="innershowMessageDiv1">
                <div id="innershowMessageDiv11" th:align="center">
                    <font color="#FF0000" size="3" th:align="center"><strong>温馨小贴士</strong></font>
                </div>
                <div id="innershowMessageDiv12" th:align="left">
                </div>
            </div>
            <div id="innershowMessageDiv2" th:align="right">
                <p>
                    <br>
                    <input type="button" value="关闭" onclick="closeShowMessage()">
            </div>
        </div>
    </div>
</div>

<script src="/lib/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript">
    $("[rel=tooltip]").tooltip();
    $(function () {
        $('[data-popover="true"]').popover({html: true});
        $('.demo-cancel-click').click(function () {
            return false;
        });
    });
</script>


</body>
</html>